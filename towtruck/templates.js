/* This Source Code Form is subject to the terms of the Mozilla Public
 * License, v. 2.0. If a copy of the MPL was not distributed with this file,
 * You can obtain one at http://mozilla.org/MPL/2.0/. */

define(["util"], function (util) {
  function clean(t) {
    // Removes <% /* ... */ %> comments:
    t = t.replace(/[<][%]\s*\/\*[\S\s\r\n]*\*\/\s*[%][>]/, "");
    t = util.trim(t);
    t = t.replace(/http:\/\/localhost:8080/g, TowTruck.baseUrl);
    return t;
  }
  return {
    "interface": clean("<div id=\"towtruck-container\" class=\"towtruck\">\n\n  <!-- This is the main set of buttons: -->\n  <div id=\"towtruck-dock\" class=\"towtruck-dock-right\">\n    <div id=\"towtruck-dock-anchor\" title=\"Move the dock\">\n      <span id=\"towtruck-dock-anchor-horizontal\">\n        <img src=\"http://localhost:8080/towtruck/images/icn-handle-circle@2x.png\" alt=\"drag\">\n      </span>\n      <span id=\"towtruck-dock-anchor-vertical\">\n        <img src=\"http://localhost:8080/towtruck/images/icn-handle-circle@2x.png\" alt=\"drag\">\n      </span>\n    </div>\n    <div id=\"towtruck-buttons\">\n      <div style=\"display: none\">\n        <button id=\"towtruck-template-dock-person\" class=\"towtruck-button towtruck-dock-person\">\n          <div class=\"towtruck-tooltip towtruck-dock-person-tooltip\">\n            <span class=\"towtruck-person-name\"></span>\n            <span class=\"towtruck-person-tooltip-arrow-r\"></span>\n          </div>\n          <div class=\"towtruck-person towtruck-person-status-overlay\"></div>\n        </button>\n      </div>\n      <button id=\"towtruck-profile-button\" class=\"towtruck-button\" title=\"This is you\">\n        <div class=\"towtruck-person towtruck-person-self\"></div>\n        <div id=\"towtruck-profile-arrow\"></div>\n      </button>\n      <button id=\"towtruck-share-button\" class=\"towtruck-button\" title=\"Add a friend\"></button>\n      <button id=\"towtruck-audio-button\" class=\"towtruck-button\" title=\"Turn on microphone\">\n        <span id=\"towtruck-audio-unavailable\" class=\"towtruck-audio-set\" data-toggles=\".towtruck-audio-set\">\n        </span>\n        <span id=\"towtruck-audio-ready\" class=\"towtruck-audio-set\" data-toggles=\".towtruck-audio-set\" style=\"display: none\">\n        </span>\n        <span id=\"towtruck-audio-outgoing\" class=\"towtruck-audio-set\" data-toggles=\".towtruck-audio-set\" style=\"display: none\">\n        </span>\n        <span id=\"towtruck-audio-incoming\" class=\"towtruck-audio-set\" data-toggles=\".towtruck-audio-set\" style=\"display: none\">\n        </span>\n        <span id=\"towtruck-audio-active\" class=\"towtruck-audio-set\" data-toggles=\".towtruck-audio-set\" style=\"display: none\">\n        </span>\n        <span id=\"towtruck-audio-muted\" class=\"towtruck-audio-set\" data-toggles=\".towtruck-audio-set\" style=\"display: none\">\n        </span>\n        <span id=\"towtruck-audio-error\" class=\"towtruck-audio-set\" data-toggles=\".towtruck-audio-set\" style=\"display: none\">\n        </span>\n      </button>\n      <button id=\"towtruck-chat-button\" class=\"towtruck-button\" title=\"Chat\"></button>\n      <div id=\"towtruck-dock-participants\"></div>\n    </div>\n  </div>\n\n  <!-- The window for editing the avatar: -->\n  <div id=\"towtruck-avatar-edit\" class=\"towtruck-modal\"\n       style=\"display: none\">\n    <header> Update avatar </header>\n    <section>\n      <div class=\"towtruck-avatar-preview towtruck-person towtruck-person-self\"></div>\n      <div id=\"towtruck-avatar-buttons\">\n        <input type=\"file\" class=\"towtruck-upload-avatar\">\n        <!--<button id=\"towtruck-upload-avatar\" class=\"towtruck-primary\">Upload a picture</button>-->\n        <!--<button id=\"towtruck-camera-avatar\" class=\"towtruck-default\">Take a picture</button>-->\n      </div>\n    </section>\n    <section class=\"towtruck-buttons\">\n      <button class=\"towtruck-cancel towtruck-dismiss\">Cancel</button>\n      <span class=\"towtruck-alt-text\">or</span>\n      <button class=\"towtruck-avatar-save towtruck-primary\">Save</button>\n    </section>\n  </div>\n\n  <!-- The window for sharing the link: -->\n  <div id=\"towtruck-share\" class=\"towtruck-window\"\n       data-bind-to=\"#towtruck-share-button\" style=\"display: none\">\n    <header> Invite a friend </header>\n    <section>\n      <div class=\"towtruck-not-mobile\">\n        <p>Copy and paste this link over IM or email:</p>\n        <input type=\"text\" class=\"towtruck-share-link\">\n      </div>\n      <div class=\"towtruck-only-mobile\">\n        <p>Share <a class=\"towtruck-share-link\" href=\"#\">this link</a>\n          over a message or email.</p>\n      </div>\n    </section>\n  </div>\n\n  <!-- Participant detail template: -->\n  <div id=\"towtruck-template-participant-window\" class=\"towtruck-window\" style=\"display: none\">\n    <header><div class=\"towtruck-person towtruck-person-small\"></div><span class=\"towtruck-person-name\"></span></header>\n\n    <section class=\"towtruck-participant-window-main\">\n      <p class=\"towtruck-participant-window-row\"><strong>Role:</strong>\n        <span class=\"towtruck-person-role\"></span>\n      </p>\n\n      <p class=\"towtruck-participant-window-row\"><strong>Currently at:</strong>\n        <a class=\"towtruck-person-url towtruck-person-url-title\"></a>\n      </p>\n\n      <p class=\"towtruck-participant-window-row\"><strong>Status:</strong>\n        <span class=\"towtruck-person-status\"></span>\n      </p>\n      \n      <p class=\"towtruck-participant-window-row\"><strong class=\"towtruck-float-left\">Follow this participant:</strong>\n        <label class=\"towtruck-follow-question towtruck-float-left\" for=\"towtruck-person-status-follow\">\n          <input type=\"checkbox\" id=\"towtruck-person-status-follow\">\n        </label>\n        <span class=\"towtruck-clear\"></span>\n      </p>\n\n    </section>\n\n    <section class=\"towtruck-buttons\">\n      <!-- Displayed when the peer is at a different URL: -->\n      <div class=\"towtruck-different-url\">\n        <button class=\"towtruck-nudge towtruck-default\">Nudge them</button>\n        <a href=\"#\" class=\"towtruck-follow towtruck-person-url towtruck-primary\">Join them</a>\n      </div>\n      <!-- Displayed when the peer is at your same URL: -->\n      <div class=\"towtruck-same-url\" style=\"display: none\">\n        <span class=\"towtruck-person-name\"></span> is on the same page as you.\n      </div>\n    </section>\n  </div>\n\n  <!-- The chat screen: -->\n  <div id=\"towtruck-chat\" class=\"towtruck-window\" data-bind-to=\"#towtruck-chat-button\"\n       style=\"display: none\">\n    <header> Chat </header>\n    <section class=\"towtruck-subtitle\">\n      <div id=\"towtruck-chat-participants\" data-toggles=\"#towtruck-chat-no-participants\" style=\"display: none\">\n        <span id=\"towtruck-chat-participant-list\"></span>\n        &amp; You\n      </div>\n      <div id=\"towtruck-chat-no-participants\" data-toggles=\"#towtruck-chat-participants\">\n        No one else is here.\n      </div>\n    </section>\n\n    <div style=\"display: none\">\n\n      <!-- Template for one message: -->\n      <div id=\"towtruck-template-chat-message\" class=\"towtruck-chat-item towtruck-chat-message\">\n        <div class=\"towtruck-person\"></div>\n        <div class=\"towtruck-timestamp\"><span class=\"towtruck-time\">HH:MM</span> <span class=\"towtruck-ampm\">AM/PM</span></div>\n        <div class=\"towtruck-person-name-abbrev\"></div>\n        <div class=\"towtruck-chat-content towtruck-sub-content\"></div>\n      </div>\n\n      <!-- Template for when a person leaves: -->\n      <div id=\"towtruck-template-chat-left\" class=\"towtruck-chat-item towtruck-chat-left-item\">\n        <div class=\"towtruck-person\"></div>\n        <div class=\"towtruck-ifnot-declinedJoin\">\n          <div class=\"towtruck-inline-text\"><span class=\"towtruck-person-name\"></span> left the session.</div>\n        </div>\n        <div class=\"towtruck-if-declinedJoin\">\n          <div class=\"towtruck-inline-text\"><span class=\"towtruck-person-name\"></span> declined to join the session.</div>\n        </div>\n        <div class=\"towtruck-clear\"></div>\n      </div>\n\n      <!-- Template when a person joins the session: -->\n      <div id=\"towtruck-template-chat-joined\" class=\"towtruck-chat-item towtruck-chat-join-item\">\n        <div class=\"towtruck-person\"></div>\n        <div class=\"towtruck-inline-text\"><span class=\"towtruck-person-name\"></span> joined the session.</div>\n        <div class=\"towtruck-clear\"></div>\n      </div>\n\n      <!-- Template for system-derived messages: -->\n      <div id=\"towtruck-template-chat-system\" class=\"towtruck-chat-item\">\n        <span class=\"towtruck-chat-content towtruck-sub-content\"></span>\n      </div>\n\n      <!-- Template when a person joins the session: -->\n      <!-- <div id=\"towtruck-template-chat-joined\" class=\"towtruck-chat-item towtruck-chat-join-item\">\n        <div class=\"towtruck-person\"></div>\n        <div class=\"towtruck-inline-text\"><span class=\"towtruck-person-name\"></span> joined the session.</div>\n        <div class=\"towtruck-clear\"></div>\n      </div> -->\n\n      <!-- Template for when someone goes to a new URL: -->\n      <div id=\"towtruck-template-url-change\" class=\"towtruck-chat-item towtruck-chat-url-change\">\n        <div class=\"towtruck-person\"></div>\n        <div class=\"towtruck-inline-text\">\n          <div class=\"towtruck-if-sameUrl\">\n            <span class=\"towtruck-person-name\"></span>\n            is on the same page as you.\n          </div>\n          <div class=\"towtruck-ifnot-sameUrl\">\n            <span class=\"towtruck-person-name\"></span>\n            has gone to: <a href=\"#\" class=\"towtruck-person-url towtruck-person-url-title\" target=\"_self\"></a>\n            <section class=\"towtruck-buttons towtruck-buttons-notification-diff-url\">\n              <!-- Displayed when the peer is at a different URL: -->\n              <div class=\"towtruck-different-url towtruck-notification-diff-url\">\n                <button class=\"towtruck-nudge towtruck-default\">Nudge them</button>\n                <a href=\"#\" class=\"towtruck-follow towtruck-person-url towtruck-primary\">Join them</a>\n              </div>\n            </section>\n\n            <!-- <div>\n              <a class=\"towtruck-nudge towtruck-secondary\">Nudge them</a>\n              <a href=\"\" class=\"towtruck-person-url towtruck-follow towtruck-primary\">Join them</a>\n            </div> -->\n\n          </div>\n        </div>\n        <div class=\"towtruck-clear\"></div>\n      </div>\n    </div>\n\n    <section id=\"towtruck-chat-messages\">\n      <!-- FIX ME// need to have some dialogue that says something like - There are no chats yet! -->\n    </section>\n    <section id=\"towtruck-chat-input-box\">\n      <input type=\"text\" id=\"towtruck-chat-input\" placeholder=\"Type your message here\">\n    </section>\n  </div>\n\n  <!-- this is a kind of warning popped up when you (successfully) start RTC: -->\n  <div id=\"towtruck-rtc-info\" class=\"towtruck-window\"\n       data-bind-to=\"#towtruck-audio-button\"\n       style=\"display: none\">\n\n    <header> Audio Chat </header>\n    <section>\n      <p>\n        Activate your <strong>browser microphone</strong> near your URL bar above.\n      </p>\n      <p>\n        Talking on your microphone through your web browser is an experimental feature.\n      </p>\n      <p>\n        Read more about Audio Chat <a href=\"https://github.com/mozilla/towtruck/wiki/About-Audio-Chat-and-WebRTC\" target=\"_blank\">here</a>.\n      </p>\n    </section>\n\n    <section class=\"towtruck-buttons\">\n      <label for=\"towtruck-rtc-info-dismiss\" style=\"display: inline;\">\n        <input class=\"towtruck-dont-show-again\" id=\"towtruck-rtc-info-dismiss\" type=\"checkbox\">\n        Don't show again.\n      </label>\n      <button class=\"towtruck-default towtruck-dismiss\" type=\"button\">Close</button>\n    </section>\n  </div>\n\n  <!-- this is popped up when you hit the audio button, but RTC isn't\n  supported: -->\n  <div id=\"towtruck-rtc-not-supported\" class=\"towtruck-window\"\n       data-bind-to=\"#towtruck-audio-button\"\n       style=\"display: none\">\n    <header> Audio Chat </header>\n\n    <section>\n      <p>Audio chat requires you to use a <a href=\"https://github.com/mozilla/towtruck/wiki/About-Audio-Chat-and-WebRTC\" target=\"_blank\">\n        newer browser\n      </a>!</p>\n      <p>\n        Live audio chat requires a newer (or different) browser than you're using.\n      </p>\n      <p>\n        See\n        <a href=\"https://github.com/mozilla/towtruck/wiki/About-Audio-Chat-and-WebRTC\" target=\"_blank\">\n          this page\n        </a>\n        for more information and a list of supported browsers.\n      </p>\n    </section>\n\n    <section class=\"towtruck-buttons\">\n      <div class=\"towtruck-rtc-dialog-btn\">\n        <button class=\"towtruck-default towtruck-dismiss\" type=\"button\">Close</button>\n      </div>\n    </section>\n  </div>\n\n  <!-- The popup when a chat message comes in and the #towtruck-chat window isn't open -->\n  <div id=\"towtruck-chat-notifier\" class=\"towtruck-notification\"\n       data-bind-to=\"#towtruck-chat-button\"\n       style=\"display: none\">\n    <img src=\"http://localhost:8080/towtruck/images/notification-towtruck-logo.png\" class=\"towtruck-notification-logo\" alt=\"\">\n    <img src=\"http://localhost:8080/towtruck/images/notification-btn-close.png\" class=\"towtruck-notification-closebtn towtruck-dismiss\" alt=\"[close]\">\n    <section id=\"towtruck-chat-notifier-message\">\n    </section>\n  </div>\n\n  <!-- The menu when you click on the profile: -->\n  <div id=\"towtruck-menu\" class=\"towtruck-menu\" style=\"display: none\">\n    <div class=\"towtruck-menu-item towtruck-menu-disabled\" id=\"towtruck-menu-profile\">\n      <img id=\"towtruck-menu-avatar\">\n      <span class=\"towtruck-person-name-self\" id=\"towtruck-self-name-display\" data-toggles=\"#towtruck-menu .towtruck-self-name\"></span>\n      <input class=\"towtruck-self-name\" type=\"text\" data-toggles=\"#towtruck-self-name-display\" style=\"display: none\" placeholder=\"Enter your name\">\n    </div>\n    <div class=\"towtruck-menu-hr-avatar\"></div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-update-name\"><img src=\"http://localhost:8080/towtruck/images/button-pencil.png\" alt=\"\"> Update your name</div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-update-avatar\"><img src=\"http://localhost:8080/towtruck/images/btn-menu-change-avatar.png\" alt=\"\"> Change avatar</div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-update-color\"><span class=\"towtruck-person-bgcolor-self\"></span> Pick profile color</div>\n    <div class=\"towtruck-hr\"></div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-help\">Help</div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-feedback\">Feedback</div>\n    <div class=\"towtruck-hr\"></div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-end\"><img src=\"http://localhost:8080/towtruck/images/button-end-session.png\" alt=\"\"> End <span class=\"towtruck-tool-name\">TowTruck</span></div>\n  </div>\n\n  <!-- A window version of #towtruck-menu, for use on mobile -->\n  <div id=\"towtruck-menu-window\" class=\"towtruck-window\" style=\"display: none\">\n    <header>Settings and Profile</header>\n    <section>\n    <div class=\"towtruck-menu-item\">\n      <img class=\"towtruck-menu-avatar\">\n      <span class=\"towtruck-person-name-self\" id=\"towtruck-self-name-display\"></span>\n    </div>\n    <div class=\"towtruck-menu-hr-avatar\"></div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-update-name-button\"><img src=\"http://localhost:8080/towtruck/images/button-pencil.png\" alt=\"\"> Update your name</div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-update-avatar-button\"><img src=\"http://localhost:8080/towtruck/images/btn-menu-change-avatar.png\" alt=\"\"> Change avatar</div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-update-color-button\"><span class=\"towtruck-person-bgcolor-self\"></span> Pick profile color</div>\n    <div class=\"towtruck-hr\"></div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-help-button\">Help</div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-feedback-button\">Feedback</div>\n    <div class=\"towtruck-hr\"></div>\n    <div class=\"towtruck-menu-item\" id=\"towtruck-menu-end-button\"><img src=\"http://localhost:8080/towtruck/images/button-end-session.png\" alt=\"\"> End <span class=\"towtruck-tool-name\">TowTruck</span></div>\n    </section>\n    <section class=\"towtruck-buttons\">\n      <button class=\"towtruck-dismiss towtruck-primary\">OK</button>\n    </section>\n  </div>\n\n  <!-- The name editor, for use on mobile -->\n  <div id=\"towtruck-edit-name-window\" class=\"towtruck-window\" style=\"display: none\">\n    <header>Update Name</header>\n    <section>\n      <div>\n        <input class=\"towtruck-self-name\" type=\"text\" placeholder=\"Enter your name\">\n      </div>\n    </section>\n    <section class=\"towtruck-buttons\">\n      <button class=\"towtruck-dismiss towtruck-primary\">OK</button>\n    </section>\n  </div>\n\n  <div class=\"towtruck-menu\" id=\"towtruck-pick-color\" style=\"display: none\">\n    <div class=\"towtruck-triangle-up\"><img src=\"http://localhost:8080/towtruck/images/icn-triangle-up.png\"></div>\n    <div style=\"display: none\">\n      <div id=\"towtruck-template-swatch\" class=\"towtruck-swatch\">\n      </div>\n    </div>\n  </div>\n\n  <!-- Invisible elements that handle the RTC audio: -->\n  <audio id=\"towtruck-audio-element\"></audio>\n  <audio id=\"towtruck-local-audio\" muted=\"true\"></audio>\n\n  <!-- The intro screen for someone who joins a session the first time: -->\n  <div id=\"towtruck-intro\" class=\"towtruck-modal\" style=\"display: none\">\n    <header>Join <span class=\"towtruck-tool-name\">TowTruck</span> session?</header>\n    <section>\n      <p>Your friend has asked you to join their <a href=\"https://towtruck.mozillalabs.com/\" target=\"_blank\"><span class=\"towtruck-tool-name\">TowTruck</span></a> browser session to collaborate in real-time!</p>\n\n      <p>Would you like to join their session?</p>\n    </section>\n\n    <section class=\"towtruck-buttons\">\n      <button class=\"towtruck-destructive towtruck-modal-dont-join\">No, don't join</button>\n      <button class=\"towtruck-primary towtruck-dismiss\">Yes, join session</button>\n    </section>\n  </div>\n\n  <!-- Shown when a web browser is completely incapable of running TowTruck: -->\n  <div id=\"towtruck-browser-broken\" class=\"towtruck-modal\" style=\"display: none\">\n    <header> Sorry </header>\n\n    <section>\n      <p>\n        We're sorry, <span class=\"towtruck-tool-name\">TowTruck</span> doesn't work with this browser.  Please\n        <a href=\"https://github.com/mozilla/towtruck/wiki/Supported-Browsers#supported-browsers\">upgrade\n          to a supported browser</a> to try <span class=\"towtruck-tool-name\">TowTruck</span>.\n      </p>\n\n      <p id=\"towtruck-browser-broken-is-ie\" style=\"display: none\">\n        Internet\n        Explorer <a href=\"https://github.com/mozilla/towtruck/wiki/Supported-Browsers#internet-explorer\">is\n          not supported</a> and won't be supported in the near term,\n        please use Firefox or Chrome.\n      </p>\n    </section>\n\n    <section class=\"towtruck-buttons\">\n      <button class=\"towtruck-dismiss towtruck-primary\">End <span class=\"towtruck-tool-name\">TowTruck</span></button>\n    </section>\n\n  </div>\n\n  <!-- Shown when the browser has WebSockets, but is IE (i.e., IE10) -->\n  <div id=\"towtruck-browser-unsupported\" class=\"towtruck-modal\" style=\"display: none\">\n    <header> Unsupported Browser </header>\n\n    <section>\n      <p>\n        We're sorry, Internet Explorer <a href=\"https://github.com/mozilla/towtruck/wiki/Supported-Browsers#internet-explorer\">is not supported</a>\n        at this time.  While we may add support later, adding support is\n        not currently on our roadmap.  Please use Firefox or Chrome.\n      </p>\n\n      <p>You can continue to try to use <span class=\"towtruck-tool-name\">TowTruck</span>, but you are likely to hit\n        lots of bugs.  So be warned.</p>\n\n    </section>\n\n    <section class=\"towtruck-buttons\">\n      <button class=\"towtruck-dismiss towtruck-primary\">End <span class=\"towtruck-tool-name\">TowTruck</span></button>\n      <button class=\"towtruck-dismiss towtruck-secondary towtruck-browser-unsupported-anyway\">Try <span class=\"towtruck-tool-name\">TowTruck</span> Anyway</button>\n    </section>\n\n  </div>\n\n  <div id=\"towtruck-confirm-end\" class=\"towtruck-modal\" style=\"display: none\">\n    <header> End session? </header>\n    <section>\n      <p>\n        Are you sure you'd like to end your <span class=\"towtruck-tool-name\">TowTruck</span> session?\n      </p>\n    </section>\n    <section class=\"towtruck-buttons\">\n      <button class=\"towtruck-cancel towtruck-dismiss\">Cancel</button>\n      <span class=\"towtruck-alt-text\">or</span>\n      <button id=\"towtruck-end-session\" class=\"towtruck-destructive\">End session</button>\n    </section>\n  </div>\n\n  <div id=\"towtruck-feedback-form\" class=\"towtruck-modal\" style=\"display: none;\">\n    <header> Feedback </header>\n    <iframe src=\"https://docs.google.com/a/mozilla.com/forms/d/1lVE7JyRo_tjakN0mLG1Cd9X9vseBX9wci153z9JcNEs/viewform?embedded=true\" width=\"400\" height=\"300\" frameborder=\"0\" marginheight=\"0\" marginwidth=\"0\">Loading form...</iframe>\n    <!-- <p><button class=\"towtruck-modal-close\">Close</button></p> -->\n  </div>\n\n  <div style=\"display: none\">\n    <!-- This is when you join a session and the other person has already changed to another URL: -->\n    <div id=\"towtruck-template-url-change\" class=\"towtruck-modal\">\n      <header> Following to new URL... </header>\n      <section>\n        <div class=\"towtruck-person\"></div>\n        Following\n        <span class=\"towtruck-person-name\"></span>\n        to <a href=\"\" class=\"towtruck-person-url towtruck-person-url-title\"></a>\n      </section>\n    </div>\n  </div>\n\n  <!-- The pointer at the side of a window: -->\n  <div id=\"towtruck-window-pointer-right\" style=\"display: none\"></div>\n  <div id=\"towtruck-window-pointer-left\" style=\"display: none\"></div>\n\n  <!-- The element that overlaps the background of the page during a modal dialog: -->\n  <div id=\"towtruck-modal-background\" style=\"display: none\"></div>\n\n  <!-- Some miscellaneous templates -->\n  <div style=\"display: none\">\n\n    <!-- This is the cursor: -->\n    <div id=\"towtruck-template-cursor\" class=\"towtruck-cursor towtruck\">\n      <!-- Note: images/cursor.svg is a copy of this (for editing): -->\n      <!-- crossbrowser svg dropshadow http://demosthenes.info/blog/600/Creating-a-True-CrossBrowser-Drop-Shadow- -->\n      <svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n\t       width=\"15.147px\" height=\"19.653px\" viewBox=\"0 0 15.147 19.653\" enable-background=\"new 0 0 15.147 19.653\" xml:space=\"preserve\" >\n        <path fill-rule=\"evenodd\" clip-rule=\"evenodd\" fill=\"#9F1D20\" d=\"M7.85,19.653c0,0,4.886-1.31,6.603-1.769\n\tc-0.373-1.391,1.128-3.674,0.567-5.766c-0.56-2.091-1.167-4.353-1.167-4.353s-0.236-1.055-1.232-0.788S11.498,7.76,11.498,7.76\n\ts-0.427-1.152-1.461-1.266C9.003,6.379,8.555,7.201,8.555,7.201S8.451,5.987,7.146,6.337C5.474,6.785,6.374,9.52,6.374,9.52\n\tL3.571,2.176c0,0-0.92-2.421-1.613-2.156C1.254,0.289,1.414,1.853,1.639,2.694c0.318,1.186,2.904,9.915,2.904,9.915\n\ts-3.856-3.503-4.5-2.5c-0.393,0.688,2.023,4.821,3,5.501c0.978,0.679,3.021,1.998,4.016,3.02c0.995,1.023,0.902,0.97,0.902,0.97\"/>\n      </svg>\n      <!-- <img class=\"towtruck-cursor-img\" src=\"http://localhost:8080/towtruck/images/cursor.svg\"> -->\n      <span class=\"towtruck-cursor-container\">\n        <span class=\"towtruck-cursor-name\"></span>\n        <span style=\"display:none\" class=\"towtruck-cursor-typing\" id=\"towtruck-cursor-typebox\">\n          <span class=\"towtruck-typing-ellipse-one\">&#9679;</span><span class=\"towtruck-typing-ellipse-two\">&#9679;</span><span class=\"towtruck-typing-ellipse-three\">&#9679;</span>\n        </span>\n        <!-- Displayed when the cursor is below the screen: -->\n        <span class=\"towtruck-cursor-down\">\n\n        </span>\n        <!-- Displayed when the cursor is above the screen: -->\n        <span class=\"towtruck-cursor-up\">\n\n        </span>\n      </span>\n    </div>\n\n    <!-- This is the element that goes around focused form elements: -->\n    <div id=\"towtruck-template-focus\">\n      <div class=\"towtruck-focus towtruck-person-bordercolor\"></div>\n    </div>\n\n    <!-- This is a click: -->\n    <div id=\"towtruck-template-click\" class=\"towtruck-click towtruck\">\n    </div>\n  </div>\n</div>\n"),
    help: clean("<% /*\n  This is used to show the help when you type /help.  Used in\n  TowTruck.localChatMessage().\n\n*/ %>\n/help : this message\n/test : run an automated/randomized test (or stop one that is in progress)\n  /test start N : run N times (instead of default 100)\n  /test show : show what kind of actions the random test would take (or stop showing)\n  /test describe : describe the possible actions (instead of showing them)\n/clear : clear the chat area\n/record : open up a recorder for the session\n/playback URL : play back a session that was recorded (it's up to you to figure out how to host it)\n  /playback local:NAME : play a locally saved log\n/savelogs NAME : save the currently recorded logs under NAME (recorder must be open)\n/baseurl : set a local baseUrl to load TowTruck from, for debugging a development version of TowTruck.\n/config : override some TowTruck configuration parameters\n  /config VAR VALUE : set TowTruck.config(\"VAR\", VALUE).  VALUE must be a legal Javascript/JSON literal.\n  /config clear : remove all overridden configuration\n"),
    walkthrough: clean("<!--\n    Any elements with .towtruck-walkthrough-firsttime will only be\n    displayed on during the first-time experience.  Any elements with\n    .towtruck-walkthrough-not-firsttime will only be displayed when\n    the walkthrough is accessed through the Help menu.\n\n    Note you *cannot* use <section class=\"towtruck-walkthrough-slide\n    towtruck-walkthrough-firsttime\">: the number of sections must be the\n    same regardless.\n  -->\n<div id=\"towtruck-walkthrough\" class=\"towtruck-modal towtruck-modal-wide\">\n  <header>You're using <span class=\"towtruck-tool-name\">TowTruck</span>!<button class=\"towtruck-close\"></button></header>\n\n  <div id=\"towtruck-walkthrough-previous\"></div>\n  <div id=\"towtruck-walkthrough-next\"></div>\n\n  <section class=\"towtruck-walkthrough-slide\">\n    <p class=\"towtruck-walkthrough-main-image\"><img src=\"http://localhost:8080/towtruck/images/walkthrough-images-intro.png\"></p>\n\t<p><span class=\"towtruck-tool-name\">TowTruck</span> is a service for your website that makes it easy to collaborate in real-time on: <strong class=\"towtruck-site-name\">[site name]</strong></p>\n  </section>\n\n  <section class=\"towtruck-walkthrough-slide\">\n    <div class=\"towtruck-walkthrough-firsttime\">\n      <div class=\"towtruck-walkthrough-main-image\">\n        <div class=\"towtruck-walkthrough-avatar-section\">\n          <div class=\"towtruck-avatar-preview towtruck-person towtruck-person-self\"></div>\n          <div class=\"towtruck-avatar-upload-input\"><input type=\"file\" class=\"towtruck-upload-avatar\"></div>\n        </div>\n        <input class=\"towtruck-self-name\" type=\"text\" placeholder=\"Enter your name\">\n        <div class=\"towtruck-swatch towtruck-person-bgcolor-self\"></div>\n        <div class=\"towtruck-save-settings\">\n          <button class=\"towtruck-avatar-save towtruck-primary\">\n            <span id=\"towtruck-avatar-when-unsaved\">Save</span>\n            <span id=\"towtruck-avatar-when-saved\" style=\"display: none\">Saved!</span>\n          </button>\n        </div>\n      </div>\n      <p>Set up your avatar, name and user color above.  If you'd like to update it later, you can click your Profile button.</p>\n    </div>\n    <div class=\"towtruck-walkthrough-not-firsttime\">\n      <p class=\"towtruck-walkthrough-main-image\"><img src=\"http://localhost:8080/towtruck/images/walkthrough-images-profile.png\"></p>\n      <p>Change your avatar, name and user color using the Profile button.</p>\n    </div>\n  </section>\n\n  <section class=\"towtruck-walkthrough-slide\">\n    <p class=\"towtruck-walkthrough-main-image towtruck-ifnot-creator\"><img src=\"http://localhost:8080/towtruck/images/walkthrough-images-invite.png\">\n    </p>\n    <p class=\"towtruck-ifnot-creator\">You can invite more friends to the session by sending the invite link in the <span class=\"towtruck-tool-name\">TowTruck</span> dock.</p>\n    <p class=\"towtruck-walkthrough-main-image towtruck-if-creator\">\n      <span class=\"towtruck-walkthrough-sendlink\">\n        Copy and paste this link into IM or email to invite friends.\n      </span>\n      <input type=\"text\" class=\"towtruck-share-link\">\n    </p>\n    <p class=\"towtruck-if-creator\">Send the above link to a friend so they can join your session!  You can find this invite link on the <span class=\"towtruck-tool-name\">TowTruck</span> dock as well.</p>\n  </section>\n\n  <section class=\"towtruck-walkthrough-slide\">\n    <p class=\"towtruck-walkthrough-main-image\"><img src=\"http://localhost:8080/towtruck/images/walkthrough-images-participant.png\"></p>\n    <p>Friends who join your <span class=\"towtruck-tool-name\">TowTruck</span> session will appear here.  You can click their avatars to see more.</p>\n  </section>\n\n  <section class=\"towtruck-walkthrough-slide\">\n    <p class=\"towtruck-walkthrough-main-image\"><img src=\"http://localhost:8080/towtruck/images/walkthrough-images-chat.png\"></p>\n    <p>When your friends join you in your <span class=\"towtruck-tool-name\">TowTruck</span> session, you can chat with them here!</p>\n  </section>\n\n  <section class=\"towtruck-walkthrough-slide\">\n    <p class=\"towtruck-walkthrough-main-image\"><img src=\"http://localhost:8080/towtruck/images/walkthrough-images-rtc.png\"></p>\n    <p>If your browser supports it, click the microphone icon to begin a audio chat. Learn more about this experimental feature <a href=\"https://github.com/mozilla/towtruck/wiki/About-Audio-Chat-and-WebRTC\" target=\"_blank\">here</a>.</p>\n  </section>\n\n  <section class=\"towtruck-walkthrough-slide\">\n    <p class=\"towtruck-walkthrough-main-image\"><img src=\"http://localhost:8080/towtruck/images/walkthrough-images-logo.png\"></p>\n    <p>Alright, you're ready to use <span class=\"towtruck-tool-name\">TowTruck</span>. Now start collaborating on <strong class=\"towtruck-site-name\">[site name]</strong>!</p>\n  </section>\n\n  <div style=\"display: none\">\n    <!-- There is one of these created for each slide: -->\n    <span id=\"towtruck-template-walkthrough-slide-progress\" class=\"towtruck-walkthrough-slide-progress\">&#9679;</span>\n  </div>\n  <section id=\"towtruck-walkthrough-progress\">\n  </section>\n\n  <section class=\"towtruck-buttons\">\n    <button class=\"towtruck-primary towtruck-dismiss\">I'm ready!</button>\n  </section>\n\n</div><!-- /.towtruck-modal -->\n")
  };
});
